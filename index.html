<!doctype html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Client-side storage testing</title>

    <script type="text/javascript" src="lib/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="lib/d3.v3.min.js"></script>

    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="graph.js"></script>
    <script type="text/javascript" src="search.js"></script>
    <script type="text/javascript" src="filedrop.js"></script>
    <script type="text/javascript" src="backends/indexeddb.js"></script>
    <script type="text/javascript" src="backends/localstorage.js"></script>
    <script type="text/javascript" src="backends/websql.js"></script>
    <script type="text/javascript" src="backends/filesystem.js"></script>

    <script type="text/template" id="filedrop-template">
      <h3>Choose keyword fields for {{ filename }}</h3>
      <ul class="kw-select">
        {{ kw_choices }}
      </ul>

      <h3>Choose identifier field</h3>
      <select id="ident-select">
        {{ ident_options }}
      </select>

      <div>
        <button class="filedrop-accept">OK</button>
        <button>Cancel</button>
      </div>
    </script>

    <link rel="stylesheet" type="text/css" href="style.css" />

  </head>
  <body>

    <header id="view-more">
      <div>
        Git repository: <a href="https://github.com/ptgolden/browser-storage">https://github.com/ptgolden/browser-storage</a>
      </div>
      <div>
        Additional &amp; larger datasets: <a href="http://ptgolden.webfactional.com/browser-storage/">http://ptgolden.webfactional.com/browser-storage/</a>
      </div>
    </header>

    <section id="controls" class="grid">
      <div id="setup" class="two-columns">

        <div id="backend">
          <label>Backend: </label>
          <div id="backend-select">
            <button data-backend="IndexedDB">IndexedDB</button>
            <button data-backend="localStorage">localStorage</button>
            <button data-backend="WebSQL">WebSQL</button>
            <button data-backend="fileSystem">fileSystem</button>
          </div>
          <div id="selected-backend" style="display: none;">
            <span></span>
            <button id="delete-db" disabled="disabled">Destroy</button>
          </div>
        </div>

        <div id="data-sources">
          <label>Data: </label>
          <button class="load-data" data-name="topics" disabled="disabled">EN topics</button>
        </div>

        <div id="search">
          <label>Search: </label>
          <input id="textinput" disabled="disabled" />
        </div>
      </div>

      <div id="filedrop" class="two-columns">
      </div>

    </section>

    <section id="choose-keywords" class="hide">
    </section>

    <section class="grid" id="main">
      <div class="two-columns">
        <div id="results">&nbsp;</div>
      </div>
      <div class="two-columns">
        <div id="messages">&nbsp;</div>
      </div>
    </section>

    <section>
      <div>
        <span>Sample results for phrase "Alexander Matt" from 100k VIAF records: </span>
        <a href="results/alexander-matt_2-char.html">min 2 chars.</a> 
        <a href="results/alexander-matt_3-char.html">min 3 chars.</a> 
      </div>
      <br />
      <div id="d3-opts">
        <div>
          <span>Chart title (optional): </span>
          <input id="d3-chart-title" type="text"></input>
        </div>
        <div>
          <span>Upper bound (blank for maximum in dataset): </span>
          <input id="d3-upper-bound" type="text"></input>
        </div>
        <div>
          <span>Width (blank for default): </span>
          <input id="d3-width" type="text"></input>
        </div>
        <div>
          <button href="#" onclick="resultsGraph.redraw(); return false;">Update</button>
          <button id="d3-save" href="#" onclick="resultsGraph.updateLink(); return false;">Open chart in new page</button>
          <button id="d3-data-save" href="#" onclick="resultsGraph.openData(); return false;">Open data in new page</button>
        </div>
      </div>
      <div id="d3">
      </div>
    </section>

  </body>
</html>
